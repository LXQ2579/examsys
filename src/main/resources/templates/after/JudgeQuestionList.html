<!DOCTYPE html>
<html xmlns:toolbar="http://java.sun.com/xml/ns/persistence/orm">
<head>
    <meta charset="utf-8">
    <title>考试场次管理</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <!--css路径-->
    <link rel="stylesheet" href="/examsys/layui/css/layui.css" media="all">
    <script type="text/javascript" src="/examsys/layui/lay/modules/layer.js"></script>
    <script type="text/javascript" src="/examsys/js/jquery-1.10.1.min.js"></script>
    <script src="/examsys/js/vue.js" charset="utf-8"></script>
</head>
<body>

<div style="height: 70px;text-align: center; background-color: #C8EBFA;">
    <h1 style="text-align: center;padding-top: 20px">试题管理</h1>
</div>

<div id="searchDiv" class="layui-form searchDiv">
    <div class="layui-form-item" style="margin-left:470px">

        <div class="layui-input-inline">
            <input type="text" class="layui-input" id="questionName" name="questionName" placeholder="题干名称">
        </div>
        <div class="layui-input-inline">
            <select name="typeId" id="typeId" class="layui-input" style="display:block">
                <option value="">题目类型</option>
            </select>
        </div>
        <div class="layui-input-inline">
            <select name="subjectId" id="subjectId" class="layui-input" style="display:block">
                <option value="">科目</option>
            </select>
        </div>

        <button type="button" class="layui-btn layui-btn-normal layui-btn-sm" data-type="reload"
                style="height:38px">
            <i class="layui-icon layui-icon-search"></i>
        </button>

    </div>
    <button type="button" class="layui-btn" id="test3">
        <i class="layui-icon"></i>导入Excel文件
    </button>
</div>

<div id="bodyDiv" style="width: 99%;margin: auto">
    <table class="layui-table"  toolbar="#toolbarDemo" id="test" lay-filter="test" style="text-align: center">
        <thead>
        <th>
        <td>题干</td>
        <td>题目类型</td>
        <td>选项A</td>
        <td>选项B</td>
        <td>选项C</td>
        <td>选项D</td>
        <td>答案</td>
        <td>详解</td>
        <td>科目</td>
        <td>说明</td>
        <td>分数</td>
        <td>操作</td>
        </th>
        </thead>
        <tbody>
        <tr v-for="(ques,index) in quesList">
            <td>{{index+1}}</td>
            <td>{{ques.title}}</td>
            <td>{{ques.questionsType.tName}}</td>
            <td>{{ques.optionA}}</td>
            <td>{{ques.optionB}}</td>
            <td>{{ques.optionC}}</td>
            <td>{{ques.optionD}}</td>
            <td>{{ques.standardAnswer}}</td>
            <td>{{ques.answerDetail}}</td>
            <td>{{ques.subject.sName}}</td>
            <td>{{ques.remark}}</td>
            <td>{{ques.score}}</td>
            <td><a class="layui-btn layui-btn-xs">编辑</a>
                <a class="layui-btn layui-btn-danger layui-btn-xs">删除</a></td>
        </tr>
        </tbody>

    </table>
</div>
<!--头工具栏-->
<script type="text/html" id="toolbarDemo">
    <div class="layui-btn-container">

        <div class="layui-table-tool-temp">
            <div class="layui-inline" lay-event="add">
                <i class="layui-icon layui-icon-add-1"></i>
            </div>
        </div>
    </div>
</script>
<script type="text/html" id="barDemo">
    <a class="layui-btn layui-btn-xs" lay-event="edit">
        <i class="layui-icon"></i>
    </a>
    <a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="del">
        <i class="layui-icon"></i>
    </a>
</script>


<script>
    var vue = new Vue({
        el: "#bodyDiv",
        data: {
            quesList: []
        },
        methods: {
            findAll: function () {
                var _this = this;
                $.ajax({
                    type: "post",
                    url: "/examsys/questions/findAll.do",
                    dataType: "json",
                    success: function (data) {
                        _this.quesList = data.data;
                    }
                })
            }
        },
        created: function () {
            this.findAll();
        }

    });
</script>
<script>
    layui.use('table', function () {
        var table = layui.table;
    })

</script>

<script type="text/javascript">
    $(function () {
        $.ajax({
            url: "/examsys/type/findAll.do",
            dataType: "json",
            type: "post",
            success: function (data) {
                $(data.data).each(function (index, item) {
                    var html = "<option value=" + item.tId + ">" + item.tName + "</option>";
                    $("#typeId").append(html);
                })
            }
        });
        $.ajax({
            url: "/examsys/subject/findAll.do",
            dataType: "json",
            type: "post",
            success: function (returnData) {
                $(returnData.data).each(function (index, item) {
                    var html = "<option value=" + item.sId + ">" + item.sName + "</option>";
                    $("#subjectId").append(html);
                })
            }
        });

    });
</script>
<script>
    layui.use('table', function () {
        var table = layui.table;

        table.render({
            id: "questionTable"
            , elem: '#test'
            , toolbar: '#toolbarDemo'
            , title: '试题数据表'
        });

//头工具栏事件
        table.on('toolbar(test)', function (obj) {
            var checkStatus = table.checkStatus(obj.config.id);
            switch (obj.event) {
                case 'add':
                    layer.open({
                        type: 2 //此处以iframe举例
                        , title: '添加视频'
                        , area: ['720px', '620px']
                        , content: 'questionModify.html'
                    });
                    break;
                case 'delete':
                    if (checkStatus.data.length === 0) {
                        layer.alert("请选择需要删除的数据");
                        return;
                    }
                    var delList = [];
                    checkStatus.data.forEach(function (n) {
                        delList.push(n.id);
                    });
                    layer.confirm('确认要删除所选中的行吗？', function (index) {
                        submitdata(delList);
                        var t = layui.table;
                        t.reload('videoTable');// 重新加载页面
                    });

// console.log(checkStatus.data); //获取选中行的数据
// console.log(checkStatus.data.length); //获取选中行数量，可作为是否有选中行的条件

            }
        });
    })
</script>


</body>
</html>